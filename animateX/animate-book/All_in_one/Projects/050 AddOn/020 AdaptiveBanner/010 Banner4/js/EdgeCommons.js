// EdgeCommons for Edge Animate v2.0.0 +++ Visit edgecommons.org for documentation, updates and examples +++ Copyright (c) 2013 by Simon Widjaja +++ Distributed under the terms of the MIT license (http://www.opensource.org/licenses/mit-license.html) +++ This notice shall be included in all copies or substantial portions of the Software.

!function(a,b){var c=function(){};c.VERSION="0.0.2",c.$=b,a.Modulog=c}(window,AdobeEdge.$),function(a){var b=function(){};b.VERSION="0.0.2",b.LEVEL_NONE=0,b.LEVEL_ERROR=1,b.LEVEL_WARN=2,b.LEVEL_INFO=3,b.LEVEL_DEBUG=4,b.level=b.LEVEL_DEBUG;var c=(a.$,null);b.addLogTarget=function(a){"function"==typeof a&&(c=a)},b.debug=function(a,b,c){if(ModulogLog.level>=ModulogLog.LEVEL_DEBUG){var d="[ DEBUG "+(b?"| "+b+" ":"")+"] "+a;"undefined"!=typeof console&&"undefined"!=typeof console.debug?c?console.debug(d,c):console.debug(d):"undefined"!=typeof console&&"undefined"!=typeof console.info&&(c?console.info(d,c):console.info(d)),ModulogLog.__delegate(d,c)}},b.info=function(a,b,c){if(ModulogLog.level>=ModulogLog.LEVEL_INFO){var d="[ INFO "+(b?"| "+b+" ":"")+"] "+a;"undefined"!=typeof console&&"undefined"!=typeof console.info&&(c?console.info(d,c):console.info(d)),ModulogLog.__delegate(d,c)}},b.warn=function(a,b,c){if(ModulogLog.level>=ModulogLog.LEVEL_WARN){var d="[ WARN "+(b?"| "+b+" ":"")+"] "+a;"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(c?console.warn(d,c):console.warn(d)),ModulogLog.__delegate(d,c)}},b.error=function(a,b,c){if(ModulogLog.level>=ModulogLog.LEVEL_ERROR){var d="[ ERROR "+(b?"| "+b+" ":"")+"] "+a;"undefined"!=typeof console&&"undefined"!=typeof console.error&&(c?console.error(d,c):console.error(d)),ModulogLog.__delegate(d,c)}},b.__delegate=function(a,b){c&&(b?c(a+" : "+b.toString()):c(a))},window.Log=window.MLog=window.ModulogLog=b}(window.Modulog),function(a){var b=function(){};b.VERSION="0.0.1";var c=a.$,d=null,e=ModulogLog,f="Modulog | ModulogConfig";b.get=function(a){for(var b=a.split("."),c=d,e=0;e<b.length;e++){var f=b[e];c.hasOwnProperty(f)||ModulogLog.warn("Config value not found: "+a,"CONFIG"),c=c[f]}return c},b.set=function(a,b){for(var c=a.split("."),e=d,f=0;f<c.length-1;f++)e=e[c[f]];e[c.pop()]=b},b.init=function(a,b){"string"==typeof a&&jQuery?c.getJSON(a,function(a){d=a,"function"==typeof b&&b()}):"object"==typeof a?d=a:e.error("Could not init config. init() function expects config object or url to config.js. Latter needs jQuery to be initialized before.",f)},window.Config=window.MConfig=window.ModulogConfig=b}(window.Modulog);var ___ec$;try{___ec$=$}catch(err){___ec$=AdobeEdge.$}!function(a,b){var c=function(){};c.VERSION="2.0.0",c.$=b;a.EC=a.EdgeCommons=c}(window,___ec$),function(a){function b(){if(!a.stylesheet){var b=document.createElement("style");b.setAttribute("title","EC"),b.appendChild(document.createTextNode("")),document.head.appendChild(b),a.stylesheet=b.sheet}}function c(b,c,d){try{var e=a.getChildSymbols(b,d),f=b.getComposition(),e=f.getSymbols();for(var g in e){var h=e[g];if(isPlaying=h.isPlaying(),c){var i=h.getVariable("_ec_playState");"playing"===i?h.play():"playingReverse"===i&&h.playReverse()}else{var i=isPlaying?h.isPlayDirectionReverse()?"playingReverse":"playing":"stopped";h.setVariable("_ec_playState",i),h.stop()}}}catch(j){console.error(j.toString())}}var d=function(){};d.VERSION="1.1.0",d.stylesheet=null;var e=a.$,f=ModulogLog,g="EdgeCommons | Core",h=null,i=null,j=null,k=null;a.setAdaptiveLayouts=function(b,c,d,i,j){return b&&b.length?(h=b,j=!!j,"function"==typeof i&&(k=i),e(window).bind("resize",function(){a.applyAdaptiveLayout(c,d,j)}),a.applyAdaptiveLayout(c,d,j),!0):(f.error("Error in setAdaptiveLayouts(). Argument 'layouts' is not optional and has to be an array.",g),void 0)},a.applyAdaptiveLayout=function(a,b,c){try{a.setVariable("doResizing",function(){var d=a.getComposition().getStage(),f=c?e(window).width():d.getSymbolElement().width(),g=a.$(b),l=0,m=null;if(e.each(h,function(a,b){f>=b-l&&(m=b)}),i!=m){j&&j.deleteSymbol(),g.html("");var n=a.createChildSymbol("layout"+m,b);i=m,j=n,"function"==typeof k&&k(m,n)}});var d=a.getVariable("doResizing");d()}catch(f){console.error(f)}},a.makeStaticButton=function(b,c,d,e,f){var g=b.$("hotspot"),h=g[0]?g:b.getSymbolElement();return c&&b.$("label").html(c),d&&b.$("icon").css({"background-image":"url("+d+")","background-color":"none"}),f&&b.setVariable("data",f),"function"==typeof b.getVariable("ready")&&b.getVariable("ready")(f),h.css("cursor","pointer"),a.isMobile()||(h.bind("mouseenter",function(){b.stop("over")}),h.bind("mouseleave",function(){b.stop("normal")}),h.bind("mousedown",function(){b.stop("down")}),h.bind("mouseup",function(){b.stop("over")})),h.bind(a.CLICK_OR_TOUCH,function(){"function"==typeof e&&e(b,f)}),!0},a.makeAnimatedButton=function(b,c,d,e,f){var g=b.$("hotspot"),h=g[0]?g:b.getSymbolElement();return c&&b.$("label").html(c),d&&b.$("icon").css("background-image","url("+d+")"),f&&b.setVariable("data",f),"function"==typeof b.getVariable("ready")&&b.getVariable("ready")(f),h.css("cursor","pointer"),a.isMobile()?(b.setVariable("animatedButtonState","inactive"),h.bind("touchstart",function(){var a="inactive"!==b.getVariable("animatedButtonState");a?("function"==typeof e&&e(b,f),b.setVariable("animatedButtonState","inactive"),b.playReverse()):(b.play(),b.setVariable("animatedButtonState","active"),setTimeout(function(){b.getPosition()>0&&b.playReverse(),b.setVariable("animatedButtonState","inactive")},2e3))})):(h.bind("mouseenter",function(){b.play()}),h.bind("mouseleave",function(){b.playReverse()}),h.bind("click",function(){"function"==typeof e&&e(b,f)})),!0},a.addCSS=function(c,d,e){function f(a,b,c,d){"insertRule"in a?a.insertRule(b+"{"+c+"}",d):"addRule"in a?a.addRule(b,c,d):console.error("cannot add CSS")}e=e?e:0,b();var g="";for(var h in d)g+=h+": "+d[h]+";";return f(a.stylesheet,c,g,e),!0},a.centerStage=function(b,c){return b&&b instanceof AdobeEdge.Symbol||f.error("centerStage(): First argument 'sym' is not optional and has to be a symbol",g),c||e("body").css("overflow-x","hidden"),a.centerElement(b.getComposition().getStage().getSymbolElement()),!0},a.centerElement=function(a){return a&&a.css||f.error("centerElement(): First argument 'el' is not optional and has to be of type AdobeEdge.$ or jQuery element",g),a.css({left:"50%","margin-left":-Math.round(a.width()/2)+"px"}),!0},a.getSymbolName=function(a,b){var c=a._variables.symbolSelector;if(!b){var d=a.getParentSymbol();d&&(c=c.replace(d.getVariable("symbolSelector")+"_",""))}return c=c.replace("#","")},a.getChildSymbols=function(b,c,d){c=c!==!1?!0:!1,d=d?d:[];var e=b.getChildSymbols();if(e.length>0){var f=0,g=e.length;for(f;g>f;f++)d.push(e[f]),c&&a.getChildSymbols(e[f],c,d)}return d},a.pause=function(a,b){return c(a,!1,b),!0},a.unpause=function(a,b){return c(a,!0,b),!0},a.isJQuery=function(){return!(!AdobeEdge.$.fn||!AdobeEdge.$.fn.jquery)},a.getInjectedData=function(a,b){try{for(b=b||"data",a&&a.getParentSymbol||f.error("getInjectedData(): First argument 'sym' is not optional",g);a.getParentSymbol();)a=a.getParentSymbol();var c=a.getSymbolElement().find("."+b).html(),d=e.parseJSON(c);return d}catch(h){f.error("Reading injected data failed (scriptClassSelector="+b+")",g,h)}},a.loadComposition=function(b,c,d){if(!b||!c)return f.error("Error in loadComposition(). Arguments 'src' and 'sym' are not optional.",g),void 0;try{var h;h=c instanceof AdobeEdge.Symbol?c.getSymbolElement():c;var i="ec_"+Math.random().toString(36).substring(7);h.html('<iframe id="'+i+'" style="visibility:hidden; overflow: hidden; width: 100%; height: 100%; margin: auto; border: 0 none; background-color: rgba(255,255,255,0)"></iframe>');var j=e("#"+i),k=j[0].contentWindow;j[0].onload=function(){this.style.visibility="visible",k.AdobeEdge.bootstrapCallback(function(a){var b=k.AdobeEdge.getComposition(a);"function"==typeof d&&d(b,i,k.AdobeEdge)})},b=b+"?nocachingid="+i,j.attr("src",b)}catch(l){a.error("Error in loadComposition: ",g,l.toString())}return!0},a.isMobile=function(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/iPhone|iPad|iPod/i)||navigator.userAgent.match(/Opera Mini/i)||navigator.userAgent.match(/IEMobile/i)},a.CLICK_OR_TOUCH=a.isMobile()?"touchstart":"click",a.Core=d,a.Log=f,a.debug=f.debug,a.info=f.info,a.warn=f.warn,a.error=f.error,a.Config=MConfig}(EdgeCommons),function(a){var b=function(){};b.VERSION="2.0.0",b.compositions={};var c=a.$,d=ModulogLog,e="EdgeCommons | Parallax";b.addComposition=function(a){AdobeEdge.getComposition(a).getStage().getSymbolElement().height()||d.error("Height of stage is not available yet. Make sure you are using compositionReady instead of creationComplete",e),this.compositions[a]={};var b=AdobeEdge.getComposition(a).getStage();this.compositions[a].stage=b;var c=AdobeEdge.getComposition(a).getStage().getSymbolElement();this.compositions[a].stageElement=c;var f=c.height(),g=c.width();this.compositions[a].stageHeight=f,this.compositions[a].stageWidth=g;var h=c.css("top");this.compositions[a].stageTop=h,this.compositions[a].stageMiddle=Math.floor(h+f/2),this.compositions[a].duration=b.getDuration(),b.stop(0)},b.setup=function(b,f){return b?(void 0===f&&(f="vertical"),this.addComposition(b.getComposition().getCompId()),c(document).bind("scroll",function(){function b(){for(var b in a.Parallax.compositions){var d=a.Parallax.compositions[b],f=e/(d.stageHeight-c(window).height()),g=Math.floor(f*d.duration);d.stage.stop(g)}}function d(){for(var b in a.Parallax.compositions){var d=a.Parallax.compositions[b],f=e/(d.stageWidth-c(window).width()),g=Math.floor(f*d.duration);d.stage.stop(g)}}if("vertical"==f){var e=c("body")[0].scrollTop;b()}else if("horizontal"==f){var e=c("body")[0].scrollLeft;d()}}),void 0):(d.error("Error in setup(). Argument 'sym' is not optional.",e),void 0)},a.Parallax=b}(EdgeCommons),function(a){var b=function(){};b.VERSION="1.0.0";var c=a.$,d=ModulogLog,e="EdgeCommons | Spotlight";b.setup=function(){},b.open=function(b,f){try{if("image"!=b.type&&"animate"!=b.type&&"youtube"!=b.type)return d.error("Error in open(). Unsupported type: "+b.type,e),void 0;void 0==f&&(f=window.top.document),b.width=b.width||400,b.height=b.height||600,b.borderWidth=b.borderWidth||5,b.borderColor=b.borderColor||"#FFF";var g='<div id="spotlight"> <div class="background animated transparent"> </div> </div>';c("body",f).append(g);var g='<div class="base"></div>';c("#spotlight .background",f).append(g);var g='<div class="close-button animated transparent"></div>';c("#spotlight .background",f).append(g);var h=c("#spotlight .close-button",f);h.css("margin-left",.5*b.width-15+b.borderWidth).css("margin-top",-.5*b.height-15);var i=c("#spotlight .base",f);i.css("width",0).css("height",0).css("margin-left",0).css("margin-top",0).css("border-width",b.borderWidth).css("border-color",b.borderColor).css("border-radius",5),i.css({width:b.width,"margin-left":-.5*b.width,height:b.height,"margin-top":-.5*b.height}),setTimeout(function(){c("#spotlight .background").removeClass("transparent")},10),setTimeout(function(){i.addClass("finalscale"),c("#spotlight .content",f).css("display","inline"),c("#spotlight .close-button",f).css("display","block")},100),setTimeout(function(){c("#spotlight .fader",f).css("opacity",0),c("#spotlight .close-button",f).removeClass("transparent")},500),i.append('<div class="content"></div>');var j=c("#spotlight .content",f),k=document.location.href.split("/"),l=k[k.length-1];-1!=l.indexOf(".")&&k.pop();var m=k.join("/");switch(b.type){case"image":var n=-1==b.source.indexOf("http:")&&-1==b.source.indexOf("https:")?m+"/"+b.source:b.source;j.append('<img src="'+n+'" />');break;case"animate":var n=-1==b.source.indexOf("http:")&&-1==b.source.indexOf("https:")?m+"/"+b.source:b.source;j.append('<iframe src="'+n+'" style="overflow: hidden; width: 100%; height: 100%; margin: auto; border: 0 none;"></iframe>');break;case"youtube":j.append('<iframe width="'+b.width+'" height="'+b.height+'" src="http://www.youtube.com/embed/'+b.source+"?autoplay="+(b.param&&b.param.autoPlay?"1":"0")+'" frameborder="0" allowfullscreen></iframe>')}j.append('<div class="fader animated"></div>');{c("#spotlight .fader",f)}return c("#spotlight .background",f).bind("click",function(){a.Spotlight.close(b,f)}),!0}catch(o){return d.error(o.toString()),!1}},b.close=function(a,b){void 0==b&&(b=window.top.document),c("#spotlight .content",b).remove(),c("#spotlight .close-button",b).remove(),c("#spotlight .background",b).css("opacity",0);var d=c("#spotlight .base",b);d.removeClass("finalscale"),setTimeout(function(){c("#spotlight",b).remove(),"function"==typeof a.onClose&&a.onClose(a,b)},300)},a.Spotlight=b}(EdgeCommons),function(a){var b=function(){};b.VERSION="1.0.0";a.$;b.accessSVG=function(a){if(a.is("div")){var b=a.css("background-image").replace("url(","").replace(")","");b=b.replace('"',"")}else if(a.is("img"))var b=a.attr("src");a.css("background-image","");var c="ec_"+Math.random().toString(36).substring(7);a.append('<embed id="'+c+'" src="'+b+'" type="image/svg+xml" width="100%" height="100%" />');var d=new jQuery.Deferred,e=document.getElementById(c);return e.onload=function(){var a=e.getSVGDocument();a.notify=function(a,b){var c=document.createEvent("CustomEvent");c.initEvent(b,!0,!0),a.dispatchEvent(c)},d.resolve(a,e,c)},d},a.SVG=b}(EdgeCommons);